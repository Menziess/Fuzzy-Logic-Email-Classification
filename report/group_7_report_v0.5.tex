\documentclass[journal]{IEEEtran}

\usepackage{cite}
\usepackage{hyperref}
\usepackage{graphicx}

\usepackage{amsmath}
\interdisplaylinepenalty=2500

\usepackage{listings}
\lstset{basicstyle=\ttfamily\small, breaklines=true}
  
% correct bad hyphenation here
\hyphenation{op-tical net-works semi-conduc-tor}

\usepackage{xcolor}

\begin{document}

\title{Email content based addressee finder using fuzzy logic}
\author{Peter Heemskerk, Stefan Schenk, Jim Kamans\\11988797, 11881798, 10302905}

% The paper headers
\markboth{Fuzzy Logic Email Classification}{}

\maketitle

% As a general rule, do not put math, special symbols or citations
% in the abstract or keywords.
\begin{abstract}
Large organizations have problems with their customer service. 
Because of their complexity, they cannot answer messages from external parties in a quick manner. This project aims to demonstrate that Fuzzy Logic can be used to solve this problem, by determining the correct addressee within the organization in an automatic way.

In this project it has been demonstrated that Fuzzy Logic can successfully be implemented. (to be extended).
\end{abstract}

\section{Introduction}
\IEEEPARstart{M}{any} large organizations suffer from their own complexity. If an external party seeks contact with a specific person in an organization, this works fine, but if a party seeks contact about a subject (without knowing whom to talk to), it usually takes more time before the party gets a good answer. At this moment emailing is the main way of communication to businesses (120 bilion email a year), which include a large portion of spam mail \cite{email_statistics}.\\

Who does not have experience with this complexity or large organizations? Suppose you have a question on [example], we all have been facing either that we are sent from one person to another department or perhaps worse that we do not get an answer at all, since the message is lost somewhere. Organizations aim to get better on customer service, but tools that support this are building up. 

\colorbox{yellow}{bovenstaande mag nog meer scientific en met meer referenties, Peter}

\subsection{Problem}

This project aims to solve this issue of customer service in a complex organization. We present software based on fuzzy logic which aims to bring a message of an external party to the correct internal addressee, being a department or a person, purely based on the content of the message. Furthermore based on the same content a priority score is provided.

\subsection{Objectives}

The experiment has the goal to determine two outputs based on email content. First the correct addressee needs to be determined. Secondly a priority score. Based on the cleaned word lists a feature vector will be determined for each email. For each of the desired outputs we designed a types of feature. For addressee determination content specific features are designed. For priority determination two general features are designed. For each email a feature vector is determined consisting of content and general features. These feature are used as inputs in the fuzzy logic system to determine the two outputs: addressee and priority. \\

This project aims to prove that Fuzzy Logic works for this problem. Why fuzzy logic? Firstly, fuzzy logic deals well with incomplete or difficult to interpret data. Since there is a variety of email messages, short and long, specific and vague fuzzy logic better deals with these different sources. Secondly, fuzzy logic uses linguistic terms. With this we can include expert knowledge into the system which is relatively easy to interpret. This proves to be important for determining priority score from content, since no labeled data sets are available. \\

For our first goal addressee determination, our results can be compared to a given labeled data-set. Our second goal, using the same algorithms for determining a priority setting this experiment should be regarded as a proof-of-concept.  

\section{Literature reviews}

Fuzzy Logic has been used earlier for email classification. Ferolin \cite{phishing} 
has used fuzzy logic to implement a anti-phishing tool using content- and non-content eamil parameters. A RIPPER Classification Algorithm is used to learn relations of different phishing features, which translate into Fuzzy Logic rules. Santhi et al \cite{spam} determined the degree of dangerousness of spam email with a different method. A Fuzzy Logic system is used to categorize words that are spam in the degree to which these words are considered dangerous. The words are labeled to the names of five linguistic variables before they are fed to the particular input that corresponds with the name. Ferolin \cite{ranking} introduced a fuzzy logic based ranking function for efficient Information Retrieval. A fuzzy approach was used to rank words based on term-weighting schemes such as term frequency, inverse document frequency and normalization. The term frequency and inverse document frequency and normalization of the query and document are fed to their Fuzzy Logic Controller, whose outputs are fed to the main Fuzzy Logic Controller, which outputs a relevance score.

\section{Approach}
For email classification the following approach is followed. After data-preprocessing the email is classified. Then fuzzy logic is applied to determine addressee and priority. 

\subsection{Data preprocessing}
A private dataset from ``Gemeente Amsterdam'' is used, containing 4584 emails with complaints from citizens. 
This dataset is a csv file where each email has a correct department label, a description of the complaint, a description of contact with an employee and a proposed solution.
An example:
\begin{lstlisting}
Parkeren;Vrijdag voor een ...;Ja, contact 
gezocht ...;De 23 euro ...
\end{lstlisting}

The data needs to be cleaned filtered and ranked.

\begin{enumerate}
    \item Cleaning

    As an email body is read from the file system as plain text, individual terms are stored as individual values ('tokenized'). After that, capital characters are converted to lower case, punctuation and special characters are removed, stop-words are removed and the words are reduced to their base root form ('stemmed'). 

    \item Filtering

    The remaining words may be meaningful now, but most of them may not be 
    relevant. So the next operation will perform an intersection between the 
    words and a list of predefined relevant words. All the words that reside 
    in both lists will remain, but unlike sets, the list contains duplicates.
    As the last filtering step, the words are counted, and a corpus is created.

    \item Ranking

    Other predefined sets of words within the set of relevant words share the 
    same characteristics. For example a set $T \subseteq R$ exists where $T$ 
    is the set of technical words, and $R$ is the set of relevant words from 
    before. Feature list of technical words: $T = [t_1, t_2, \dots, t_n]$. 
    Other feature lists contain other themed words: $U$, $V$, $W$.

    For every word in the email that is present in $T$, a score is calculated 
    that takes the count of that word into account in relation to the total 
    number of relevant words in the email. This calculation is made for all 
    feature lists ($T$, $U$, $V$, $W$), for every word in the email.

\colorbox{yellow}{Bovenstaande Nakijken Stefan}
    
\end{enumerate}
    
\subsection{Classifying}

    The cleaned words from an email are classified to a 'feature" by using word matching [better word ?] using predefined feature word-lists. The words are compared to a predefined set of words per feature, and a score is determined on each of the features. For this experiment two types of features are chosen. 
    
    A content type of feature determines the subject of the email. We worked with features: personal, financial, space, tax and ...[to confirm after experiment]. We have used our labeled training set to determine these feature lists. 
    
    The second type are two general features: "agitation", which determines the (negative) emotion in the mail. And a feature "action" for addressing the more neutrally emergency of the mail. Since no labeled training-set was available for determining the feature word lists, we based our word lists based on a training set of 40 emails which were scored on a scale from 1 to 100 on the variables "agitation" and "action" by an experienced email reader [or more ?]  
    
\subsection{Fuzzy Logic}
    
    The following parameters have been set in our Fuzzy Logic system: 
    
\colorbox{yellow}{figure with input params, rules and output parms}

\subsection{Implementation}
For cooperation purposes we used Github \footnote{\url{https://github.com/Menziess/Fuzzy-Logic-Email-Classification}} (for source control) and Trello \footnote{\url{https://trello.com/fuzzylogicemailclassification}} (as scrum projectmanagement tool)

We used Python3 as programming language and Jupyter Notebook as development 
environment. The code is enlisted in Attachment [ref]. For data-preprocessing Pythons NLTK module \footnote{\url{http://www.nltk.org/}} is used. For classification a new algorithm has been developed. The fuzzy logic system itself is based on the Fuzzy Logic LAB \footnote{\url{https://blackboard.uva.nl/webapps/blackboard/execute/content/file?cmd=view&content_id=_6947429_1&course_id=_212301_1&framesetWrapped=true}}, amended for using more than one output, a centroid defuzzifier and some more flexibility and error handling in management of fuzzy logic rules. 
    
\section{Experiment}

Our goal is two fold. Firstly, the use of fuzzy logic is tested to send an email to the right department. Secondly, with fuzzy logic we aim to solve how priority can be deducted from e-mail contents. Experimental approach for both is different. 

\subsection{The correct departments - content}

We can make this a supervised learning experiment, since we have for each email department labels available. We divide our data-set in a training set and validation set with factor 0.6. We train the system with the training set and validate on the validation set. Our feature lists (lists with trigger words for each content feature) is trained. For the Fuzzy Logic rule set we used our own expert knowledge.

\subsection{The correct priority - the notion of agitation and action}

To translate a received email based on its content to priority is innovative and our data-set does not give labels for the outcome. The following approach is taken. 

For training the feature lists for input variables ``agitation'' and ``action'' 40 emails are randomly selected from our training-set and we have an independent experienced email reader score for these two input variables on a scale from 1 to 100. Based on these inputs, the feature lists are create resulting in the trigger words for ``agitation'' and for ``action''. 

For validation we randomly selected 40 emails from our validation set and had an independent experienced email reader score for the output ``priority'' on a scale from 1 to 1000. These values are used for validation. 

\subsection{Results}

First results are promising but much work is left to do. 

\subsection{Discussion}
Due to time-constraints the project has limitations:
\begin{itemize}
    \item Only written emails are used as input. At this moment emailing is the main way of communication to businesses (120 bilion email a year \cite{email_statistics}, and far more used than other ways like social media or message apps. This will change, so in a later phase we envision this to be expanded to messages in any format, like messaging via WhatsApp or LinkedIn.
    \item The ``word-to-feature translator'' is implemented with limited scope, currently a number of only \colorbox{yellow}{(xx?)} English words. We did not extend too much on this, since we would like to focus on the Fuzzy Logic part of the software.
\end{itemize}

% Niet gewenst volgens onze assessor.
%This work is done as part of the autumn 2017 bachelor course Fundamentals of Fuzzy Logic by A. Bilgin (and  M. Hol and V. Dankers) within the study Artificial Intelligence at University of Amsterdam.

% trigger a \newpage just before the given reference
% number - used to balance the columns on the last page
% adjust value as needed - may need to be readjusted if
% the document is modified later
%\IEEEtriggeratref{8}
% The "triggered" command can be changed if desired:
%\IEEEtriggercmd{\enlargethispage{-5in}}

\begin{thebibliography}{9}
\bibitem{email_statistics}
    The Radicati Group, inc.(2015),
    \textit{
        \href{https://github.com/Menziess/Fuzzy-Logic-Email-Classification/raw/master/report/res/a_new_fuzzy_logic_based_ranking_function_for_efficient_information_retrieval_system.pdf}{Email Statistics Report, 2015-2019},
    }.

\bibitem{spam}
    G.Santhi, S. Maria Wenish, Dr. P. Sengutuvan (2013),
    \textit{
        \href{https://github.com/Menziess/Fuzzy-Logic-Email-Classification/raw/master/report/res/a_content_based_classification_of_spam_mails_with_fuzzy_word_ranking.pdf}{A Content Based Classification of Spam Mails with Fuzzy Word Ranking},
    }
    Department of Information Science and Technology,
    Issue 3.

\bibitem{phishing}
    Rosana J. Ferolin, (2010 - approx.)
    \textit{
        \href{https://github.com/Menziess/Fuzzy-Logic-Email-Classification/raw/master/report/res/a_proactive_anti-phishing_tool_using_fuzzy_logic_and_ripper_data_mining_classification_algorithm.pdf}{A Proactive Anti-Phishing Tool Using Fuzzy Logic and RIPPER Data Mining Classification Algorithm},
    }
    Department of Computer Engineering University of San Carlos.

\bibitem{ranking}
    Rosana J. Ferolin, (2014)
    \textit{
        \href{https://github.com/Menziess/Fuzzy-Logic-Email-Classification/raw/master/report/res/a_new_fuzzy_logic_based_ranking_function_for_efficient_information_retrieval_system.pdf}{A new fuzzy logic based ranking function for efficient Information Retrieval system},
    }
    Department of Electrical Engineering Dayalbagh Educational Institute.

\end{thebibliography}

\end{document}


